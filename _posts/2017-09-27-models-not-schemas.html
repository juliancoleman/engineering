---
title: Models !== Schemas
layout: default
permalink: /:year/:month/:day/:title
tags: resources
---

<div class="mdc-typography">
  <div class="mdc-layout-grid max-width">
    {% include post-header.html %}

    <div class="mdc-layout-grid__inner" style="grid-gap: unset;">
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-8 mdc-layout-grid__cell--span-8-tablet">
        <h2 class="mdc-typography--headline mdc-theme--primary" style="font-weight: 400;">
          Intro
        </h2>

        <p class="mdc-typography--body-1">
          Well, I can't believe I even have to write a post about this
          one. Back in late 2016 to just before the summer of 2017,
          the company I worked for gave me the task of building an app
          that essentially the business ran on. This app handled all
          the finances&mdash;paying employees, charging students, etc.
          &mdash;as well as a number of really important things that
          allowed our company to run and function as a business. If
          this app ever went down, we could lose between $80,000 to
          $1.5M in a very short time. For the sake of anonymity and
          respect for those involved, I won't name the company, and
          I'll dub the project <code>Purple Buddy</code>.
        </p>

        <p class="mdc-typography--body-1">
          I'll be comparing why these two are often confused and how
          to not be so confused next time you're working on a project
          where this argument arises. Our comparison will include
          <code>MongoDB</code>, versus <code>Joi</code> and
          <code>SQL</code>.
        </p>

        <h2 class="mdc-typography--title mdc-theme--primary" style="font-weight: 400;">
          Models
        </h2>

        <p class="mdc-typography--body-1">
          Let's take a minute to talk about what a <code>Model</code>
          is. The best way that I could define a model is similar to
          actually looking at a <em>clay model.</em> The model has
          curves and edges, personality, and a shape. It has
          <em>structure.</em> Everything that can be known about the
          model can be seen superficially, as well as have some
          visceral mechanics that aren't seen. These are often
          represented by <code>virtuals</code>, <code>methods</code>,
          and <code>relations</code>. While they pertain to the model
          itself, models are really just <em>prototypes</em>, similar
          to <code>classes</code> or <code>primitives</code> in
          JavaScript. Their shape is inherited and extended with each
          generation.
        </p>

        <h2 class="mdc-typography--title mdc-theme--primary" style="font-weight: 400;">
          Schemas
        </h2>

        <p class="mdc-typography--body-1">
          Now that we've covered what a <code>Model</code> is, let's
          switch gears to <code>Schema</code>s. A schema is a set of
          column names with their associated types, and we can refer to
          it as blueprints for a table which lay out the properties of
          our models. These might be properties like a name, age, or
          hair color. When you look at a human being, you are looking
          at creation, equal in worth yet unique in the purpose he or
          she serves. This human being has a set of attributes. Their
          eyes tell the meaning of life. The model is the molded clay,
          the schema is the attributes for that model.
        </p>

        <h2 class="mdc-typography--title mdc-theme--primary" style="font-weight: 400;">
          Mongoose
        </h2>

        <p class="mdc-typography--body-1">
          Mongoose is a MongoDB object modeling tool designed to work
          in an asynchronous environment. Not like that last part
          matters unless you're getting down in the nitty-gritty, but
          this is the definition that can be found
          <a href="http://mongoosejs.com/docs/2.7.x/">here</a>. Now,
          as you're reading that post, we run into our first problem.
          Mongoose tells us that defining a model is as easy as:
        </p>

        {% highlight javascript %}
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , buf       : Buffer
  , date      : Date
  , comments  : [Comments]
  , meta      : {
      votes : Number
    , favs  : Number
  }
});

var Post = mongoose.model('BlogPost', BlogPost);
        {% endhighlight %}

        <p class="mdc-typography--body-1">
          The first thing you may have noticed is that we are defining
          a <code>model</code>, but we are saying <code>new Schema</code>.
          Your first mistake may be that you're using Mongoose, but
          that's besides the point. Finally, on the last line, we can
          see that we're creating a <code>mongoose.model</code> with
          the schema, <code>BlogPost</code>. The code above implies
          that models and schemas are the same, but <em>you'd be
          wrong.</em>
        </p>

        <p class="mdc-typography--body-1">
          I worked on <em>Purple Buddy</em> with one other person;
          together, we made up a team. We had no scope of work, but we
          did have an idea of what the app was supposed to do: to
          authenticate different types of admin users, and show
          sidebar items based on their role, and redirect to a
          <code>403</code> page if they didn't possess the proper role
          to access that route. The rest of the operations were simple
          CRUD, which I won't get into much detail on.
        </p>

      </div>
    </div>
  </div>
</div>

